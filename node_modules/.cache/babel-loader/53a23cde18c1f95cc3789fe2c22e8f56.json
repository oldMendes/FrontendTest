{"ast":null,"code":"var _jsxFileName = \"/home/administrador/Tcc-puc-minas/frontend/src/views/Barragens/index.js\";\nimport React from \"react\";\nimport Card from \"../../components/Card\";\nimport ModalGeneric from \"../../components/ModalGeneric\";\nimport { Button } from \"antd\";\nimport BarragensTable from \"./BarragensTable\";\nimport axios from \"axios\";\nimport FormGroup from \"../../components/FormGroup\";\nimport SelectMenu from \"../../components/SelectMenu\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport { AuthContext } from \"../../main/provedorAutenticacao\";\nimport { TIPO_BARRAGEM, STATUS_BARRAGEM, POTENTIAL_DAM_DAMAGE } from \"../../utils/constants/selects\";\nimport { STATES } from '../../data/index';\n\nconst type = tipo => {\n  switch (tipo) {\n    case \"MONTANTE\":\n      return 0;\n\n    case \"JUSTANTE\":\n      return 1;\n\n    case \"LINHA_DE_CENTRO\":\n      return 2;\n\n    default:\n      break;\n  }\n};\n\nconst status = tipo => {\n  switch (tipo) {\n    case \"STABLE\":\n      return 0;\n\n    case \"ALERT\":\n      return 1;\n\n    case \"CRITICAL\":\n      return 2;\n\n    default:\n      break;\n  }\n};\n\nconst potentialDamDamage = tipo => {\n  switch (tipo) {\n    case \"LOW\":\n      return 0;\n\n    case \"MEDIUM\":\n      return 1;\n\n    case \"HIGH\":\n      return 2;\n\n    default:\n      break;\n  }\n};\n\nclass Barragens extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      visible: false,\n      title: \"\",\n      damId: \"\",\n      name: \"\",\n      nomeEmpresa: \"\",\n      latitude: \"\",\n      longitude: \"\",\n      damType: \"\",\n      // damStatus: \"\",\n      potentialDamDamage: \"\"\n    };\n\n    this.showModal = acao => {\n      switch (acao) {\n        case \"cadastrar\":\n          this.setState({\n            title: \"Pesquisar por planos disponíveis\"\n          });\n          this.setState({\n            name: \"\",\n            nomeEmpresa: \"\",\n            latitude: \"\",\n            longitude: \"\",\n            damType: \"\",\n            // damStatus: \"\",\n            potentialDamDamage: \"\"\n          });\n          break;\n\n        case \"editar\":\n          this.setState({\n            title: \"Editar barragem\"\n          });\n          break;\n\n        default:\n          break;\n      }\n\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.handleOk = _e => {\n      if (this.state.title === \"Cadastrar barragem\") {\n        axios.post(\"http://localhost:8090/saveDam\", {\n          name: this.state.name,\n          nomeEmpresa: this.state.nomeEmpresa,\n          latitude: this.state.latitude,\n          longitude: this.state.longitude,\n          damType: this.state.damType,\n          // damStatus: this.state.damStatus,\n          potentialDamDamage: this.state.potentialDamDamage\n        }).then(() => {\n          this.listarBarragens();\n        }).catch(erro => {\n          console.log(erro.response);\n        });\n      } else {\n        axios.put(`http://localhost:8090/updateDam/${this.state.damId}`, {\n          name: this.state.name,\n          nomeEmpresa: this.state.nomeEmpresa,\n          latitude: parseInt(this.state.latitude),\n          longitude: parseInt(this.state.longitude),\n          damType: parseInt(this.state.damType),\n          // damStatus: parseInt(this.state.damStatus),\n          potentialDamDamage: parseInt(this.state.potentialDamDamage)\n        }).then(() => {\n          this.listarBarragens();\n        }).catch(erro => {\n          console.log(erro.response);\n        });\n      }\n\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleCancel = e => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.deletar = damId => {\n      axios.delete(`http://localhost:8090/deleteDam/${damId}`).then(() => {\n        this.listarBarragens();\n      }).catch(erro => {\n        alert(erro);\n      });\n    };\n\n    this.editar = damId => {\n      this.setState({\n        damId: damId\n      });\n      axios.get(`http://localhost:8090/damById/${damId}`).then(reponse => {\n        this.setState({\n          name: reponse.data.name,\n          nomeEmpresa: reponse.data.nomeEmpresa,\n          latitude: reponse.data.latitude,\n          longitude: reponse.data.longitude,\n          damType: type(reponse.data.damType),\n          // damStatus: status(reponse.data.damStatus),\n          potentialDamDamage: potentialDamDamage(reponse.data.potentialDamDamage)\n        });\n      }).catch(erro => {\n        alert(erro);\n      });\n      this.showModal(\"editar\");\n    };\n  }\n\n  componentDidMount() {\n    this.listarBarragens();\n  }\n\n  listarBarragens() {\n    axios.get(\"http://localhost:8090/listDams\").then(response => {\n      this.setState({\n        data: response.data\n      });\n    }).catch(erro => {\n      console.log(erro.response);\n    });\n  }\n\n  render() {\n    var _this$state;\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, console.log(console.log('te', STATES)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      style: {\n        marginBottom: \"15px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      icon: /*#__PURE__*/React.createElement(PlusOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 21\n        }\n      }),\n      size: \"large\",\n      style: {\n        float: \"right\"\n      },\n      onClick: () => this.showModal(\"cadastrar\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }\n    }, \"Planos dispon\\xEDveis\"))), /*#__PURE__*/React.createElement(Card, {\n      title: \"Barragens\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      style: {\n        overflowX: \"auto\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(BarragensTable, {\n      data: (_this$state = this.state) === null || _this$state === void 0 ? void 0 : _this$state.data,\n      editar: id => this.editar(id),\n      deletar: id => this.deletar(id),\n      detalhes: id => this.props.history.push(`/detalhes-barragem/${id}`),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalGeneric, {\n      title: this.state.title,\n      visible: this.state.visible,\n      onOk: this.handleOk,\n      onCancel: this.handleCancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      htmlFor: \"name\",\n      label: \"Barragem*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.name,\n      type: \"text\",\n      className: \"form-control\",\n      id: \"inputNome\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Digite o nome da barragem\",\n      onChange: e => this.setState({\n        name: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      htmlFor: \"latitude\",\n      label: \"Latitude*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.latitude,\n      type: \"number\",\n      className: \"form-control\",\n      id: \"inputNome\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Digite a latitude\",\n      onChange: e => this.setState({\n        latitude: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      htmlFor: \"nomeEmpresa\",\n      label: \"Nome da empresa*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.nomeEmpresa,\n      type: \"text\",\n      className: \"form-control\",\n      id: \"inputNome\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Digite o nome da empresa\",\n      onChange: e => this.setState({\n        nomeEmpresa: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      htmlFor: \"longitude\",\n      label: \"Longitude*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.longitude,\n      type: \"number\",\n      className: \"form-control\",\n      id: \"inputNome\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Digite a longitude\",\n      onChange: e => this.setState({\n        longitude: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      label: \"Tipo de barragem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(SelectMenu, {\n      value: this.state.damType,\n      className: \"form-control\",\n      lista: STATES,\n      onChange: e => this.setState({\n        damType: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      label: \"Dano Potencial\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(SelectMenu, {\n      value: this.state.potentialDamDamage,\n      className: \"form-control\",\n      lista: POTENTIAL_DAM_DAMAGE,\n      onChange: e => this.setState({\n        potentialDamDamage: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 21\n      }\n    }))))))));\n  }\n\n}\n\nBarragens.contextType = AuthContext;\nexport default Barragens;","map":{"version":3,"sources":["/home/administrador/Tcc-puc-minas/frontend/src/views/Barragens/index.js"],"names":["React","Card","ModalGeneric","Button","BarragensTable","axios","FormGroup","SelectMenu","PlusOutlined","AuthContext","TIPO_BARRAGEM","STATUS_BARRAGEM","POTENTIAL_DAM_DAMAGE","STATES","type","tipo","status","potentialDamDamage","Barragens","Component","state","data","visible","title","damId","name","nomeEmpresa","latitude","longitude","damType","showModal","acao","setState","handleOk","_e","post","then","listarBarragens","catch","erro","console","log","response","put","parseInt","handleCancel","e","deletar","delete","alert","editar","get","reponse","componentDidMount","render","marginBottom","float","overflowX","id","props","history","push","target","value","contextType"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Card from \"../../components/Card\";\nimport ModalGeneric from \"../../components/ModalGeneric\";\nimport { Button } from \"antd\";\nimport BarragensTable from \"./BarragensTable\";\nimport axios from \"axios\";\nimport FormGroup from \"../../components/FormGroup\";\nimport SelectMenu from \"../../components/SelectMenu\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport { AuthContext } from \"../../main/provedorAutenticacao\";\nimport {\n  TIPO_BARRAGEM,\n  STATUS_BARRAGEM,\n  POTENTIAL_DAM_DAMAGE,\n} from \"../../utils/constants/selects\";\nimport { STATES } from '../../data/index';\n\nconst type = (tipo) => {\n  switch (tipo) {\n    case \"MONTANTE\":\n      return 0;\n    case \"JUSTANTE\":\n      return 1;\n    case \"LINHA_DE_CENTRO\":\n      return 2;\n    default:\n      break;\n  }\n};\n\nconst status = (tipo) => {\n  switch (tipo) {\n    case \"STABLE\":\n      return 0;\n    case \"ALERT\":\n      return 1;\n    case \"CRITICAL\":\n      return 2;\n    default:\n      break;\n  }\n};\nconst potentialDamDamage = (tipo) => {\n  switch (tipo) {\n    case \"LOW\":\n      return 0;\n    case \"MEDIUM\":\n      return 1;\n    case \"HIGH\":\n      return 2;\n    default:\n      break;\n  }\n};\n\nclass Barragens extends React.Component {\n  state = {\n    data: [],\n    visible: false,\n    title: \"\",\n    damId: \"\",\n    name: \"\",\n    nomeEmpresa: \"\",\n    latitude: \"\",\n    longitude: \"\",\n    damType: \"\",\n    // damStatus: \"\",\n    potentialDamDamage: \"\",\n  };\n\n  componentDidMount() {\n    this.listarBarragens();\n    \n  }\n  listarBarragens() {\n    axios\n      .get(\"http://localhost:8090/listDams\")\n      .then((response) => {\n        this.setState({ data: response.data });\n      })\n      .catch((erro) => {\n        console.log(erro.response);\n      });\n  }\n  showModal = (acao) => {\n    switch (acao) {\n      case \"cadastrar\":\n        this.setState({ title: \"Pesquisar por planos disponíveis\" });\n        this.setState({\n          name: \"\",\n          nomeEmpresa: \"\",\n          latitude: \"\",\n          longitude: \"\",\n          damType: \"\",\n          // damStatus: \"\",\n          potentialDamDamage: \"\",\n        });\n        break;\n      case \"editar\":\n        this.setState({ title: \"Editar barragem\" });\n        break;\n      default:\n        break;\n    }\n    this.setState({\n      visible: true,\n    });\n  };\n\n  handleOk = (_e) => {\n    if (this.state.title === \"Cadastrar barragem\") {\n      axios\n        .post(\"http://localhost:8090/saveDam\", {\n          name: this.state.name,\n          nomeEmpresa: this.state.nomeEmpresa,\n          latitude: this.state.latitude,\n          longitude: this.state.longitude,\n          damType: this.state.damType,\n          // damStatus: this.state.damStatus,\n          potentialDamDamage: this.state.potentialDamDamage,\n        })\n        .then(() => {\n          this.listarBarragens();\n        })\n        .catch((erro) => {\n          console.log(erro.response);\n        });\n    } else {\n      axios\n        .put(`http://localhost:8090/updateDam/${this.state.damId}`, {\n          name: this.state.name,\n          nomeEmpresa: this.state.nomeEmpresa,\n          latitude: parseInt(this.state.latitude),\n          longitude: parseInt(this.state.longitude),\n          damType: parseInt(this.state.damType),\n          // damStatus: parseInt(this.state.damStatus),\n          potentialDamDamage: parseInt(this.state.potentialDamDamage),\n        })\n        .then(() => {\n          this.listarBarragens();\n        })\n        .catch((erro) => {\n          console.log(erro.response);\n        });\n    }\n\n    this.setState({\n      visible: false,\n    });\n  };\n\n  handleCancel = (e) => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  deletar = (damId) => {\n    axios\n      .delete(`http://localhost:8090/deleteDam/${damId}`)\n      .then(() => {\n        this.listarBarragens();\n      })\n      .catch((erro) => {\n        alert(erro);\n      });\n  };\n  editar = (damId) => {\n    this.setState({ damId: damId });\n    axios\n      .get(`http://localhost:8090/damById/${damId}`)\n      .then((reponse) => {\n        this.setState({\n          name: reponse.data.name,\n          nomeEmpresa: reponse.data.nomeEmpresa,\n          latitude: reponse.data.latitude,\n          longitude: reponse.data.longitude,\n          damType: type(reponse.data.damType),\n          // damStatus: status(reponse.data.damStatus),\n          potentialDamDamage: potentialDamDamage(\n            reponse.data.potentialDamDamage\n          ),\n        });\n      })\n      .catch((erro) => {\n        alert(erro);\n      });\n    this.showModal(\"editar\");\n  };\n\n  \n  render() {\n    return (\n      <>\n      {console.log(console.log('te', STATES))}\n        <div className=\"row\" style={{ marginBottom: \"15px\" }}>\n          <div className=\"col-md-12\">\n            <Button\n              type=\"primary\"\n              icon={<PlusOutlined />}\n              size=\"large\"\n              style={{ float: \"right\" }}\n              onClick={() => this.showModal(\"cadastrar\")}\n            >\n              Planos disponíveis\n            </Button>\n          </div>\n        </div>\n        <Card title=\"Barragens\">\n          <br />\n          <div className=\"row\">\n            <div className=\"col-md-12\" style={{ overflowX: \"auto\" }}>\n              <div className=\"bs-component\">\n                <BarragensTable\n                  data={this.state?.data}\n                  editar={(id) => this.editar(id)}\n                  deletar={(id) => this.deletar(id)}\n                  detalhes={(id) =>\n                    this.props.history.push(`/detalhes-barragem/${id}`)\n                  }\n                />\n              </div>\n            </div>\n          </div>\n        </Card>\n        <div>\n          <ModalGeneric\n            title={this.state.title}\n            visible={this.state.visible}\n            onOk={this.handleOk}\n            onCancel={this.handleCancel}\n          >\n            <div className=\"row\">\n              <div className=\"col-md-6\">\n                <div className=\"bs-component\">\n                  <FormGroup htmlFor=\"name\" label=\"Barragem*\">\n                    <input\n                      value={this.state.name}\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"inputNome\"\n                      aria-describedby=\"emailHelp\"\n                      placeholder=\"Digite o nome da barragem\"\n                      onChange={(e) => this.setState({ name: e.target.value })}\n                    ></input>\n                  </FormGroup>\n                  <FormGroup htmlFor=\"latitude\" label=\"Latitude*\">\n                    <input\n                      value={this.state.latitude}\n                      type=\"number\"\n                      className=\"form-control\"\n                      id=\"inputNome\"\n                      aria-describedby=\"emailHelp\"\n                      placeholder=\"Digite a latitude\"\n                      onChange={(e) =>\n                        this.setState({ latitude: e.target.value })\n                      }\n                    ></input>\n                  </FormGroup>\n                </div>\n              </div>\n              <div className=\"col-md-6\">\n                <div className=\"bs-component\">\n                  <FormGroup htmlFor=\"nomeEmpresa\" label=\"Nome da empresa*\">\n                    <input\n                      value={this.state.nomeEmpresa}\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"inputNome\"\n                      aria-describedby=\"emailHelp\"\n                      placeholder=\"Digite o nome da empresa\"\n                      onChange={(e) =>\n                        this.setState({ nomeEmpresa: e.target.value })\n                      }\n                    ></input>\n                  </FormGroup>\n                  <FormGroup htmlFor=\"longitude\" label=\"Longitude*\">\n                    <input\n                      value={this.state.longitude}\n                      type=\"number\"\n                      className=\"form-control\"\n                      id=\"inputNome\"\n                      aria-describedby=\"emailHelp\"\n                      placeholder=\"Digite a longitude\"\n                      onChange={(e) =>\n                        this.setState({ longitude: e.target.value })\n                      }\n                    ></input>\n                  </FormGroup>\n                </div>\n              </div>\n\n              <div className=\"col-md-6\">\n                <div className=\"bs-component\">\n                  <FormGroup label=\"Tipo de barragem\">\n                    <SelectMenu\n                      value={this.state.damType}\n                      className=\"form-control\"\n                      lista={STATES}\n                      onChange={(e) =>\n                        this.setState({ damType: e.target.value })\n                      }\n                    />\n                  </FormGroup>\n                </div>\n              </div>\n              <div className=\"col-md-6\">\n                <div className=\"bs-component\">\n                  <FormGroup label=\"Dano Potencial\">\n                    <SelectMenu\n                      value={this.state.potentialDamDamage}\n                      className=\"form-control\"\n                      lista={POTENTIAL_DAM_DAMAGE}\n                      onChange={(e) =>\n                        this.setState({ potentialDamDamage: e.target.value })\n                      }\n                    />\n                  </FormGroup>\n                </div>\n              </div>\n            </div>\n          </ModalGeneric>\n        </div>\n      </>\n    );\n  }\n}\nBarragens.contextType = AuthContext;\n\nexport default Barragens;\n"]},"metadata":{},"sourceType":"module"}