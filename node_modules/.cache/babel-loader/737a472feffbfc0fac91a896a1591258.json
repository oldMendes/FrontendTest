{"ast":null,"code":"var _jsxFileName = \"/home/administrador/Tcc-puc-minas/frontend/src/views/DetalhesAtivo/ListaManutencao/index.js\";\nimport React, { useEffect } from \"react\";\nimport Card from \"../../../components/Card\";\nimport ManutencaoTable from \"../ManutencaoTable\";\nimport ModalGeneric from \"../../../components/ModalGeneric\";\nimport FormGroup from \"../../../components/FormGroup\";\nimport { Button, InputNumber, DatePicker } from \"antd\";\nimport axios from \"axios\";\nimport { STATUS_MANUTENCAO, TIPO_MANUTENCAO } from \"../../../utils/constants/selects\";\nimport SelectMenu from \"../../../components/SelectMenu\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport moment from \"moment\";\n\nconst tipoManutencao = tipo => {\n  switch (tipo) {\n    case \"PREVENTIVE\":\n      return 0;\n\n    case \"CORRECTIVE\":\n      return 1;\n\n    default:\n      break;\n  }\n};\n\nconst statusManutencao = tipo => {\n  switch (tipo) {\n    case \"OPEN\":\n      return 0;\n\n    case \"PROCESSING\":\n      return 1;\n\n    case \"CLOSED\":\n      return 2;\n\n    default:\n      break;\n  }\n};\n\nclass ListaManutencao extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visible: false,\n      title: \"\",\n      params: \"\",\n      maintenanceId: \"\",\n      maintenanceStartDate: \"\",\n      maintenanceEndDate: \"\",\n      maintenanceDescription: \"\",\n      maintenanceStatus: \"\",\n      typeMaintenance: \"\"\n    };\n\n    this.showModal = acao => {\n      switch (acao) {\n        case \"cadastrar\":\n          this.setState({\n            title: \"Cadastrar manutenção\"\n          });\n          this.setState({\n            maintenanceId: \"\",\n            maintenanceStartDate: \"\",\n            maintenanceEndDate: \"\",\n            maintenanceDescription: \"\",\n            maintenanceStatus: \"\",\n            typeMaintenance: \"\"\n          });\n          break;\n\n        case \"editar\":\n          this.setState({\n            title: \"Editar manutenção\"\n          });\n          break;\n\n        default:\n          break;\n      }\n\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.handleOk = _e => {\n      if (this.state.title === \"Cadastrar manutenção\") {\n        axios.post(`http://localhost:8090/saveMaintenance/${this.props.params}`, {\n          maintenanceStartDate: moment(this.state.maintenanceStartDate).format(),\n          maintenanceEndDate: moment(this.state.maintenanceEndDate).format(),\n          maintenanceDescription: this.state.maintenanceDescription,\n          maintenanceStatus: this.state.maintenanceStatus,\n          typeMaintenance: this.state.typeMaintenance\n        }).then(() => {\n          this.listarBarragens();\n        }).catch(erro => {\n          console.log(erro.response);\n        });\n      } else {\n        axios.put(`http://localhost:8090/updateMaintenance/${this.state.maintenanceId}`, {\n          maintenanceStartDate: moment(this.state.maintenanceStartDate).format(),\n          maintenanceEndDate: moment(this.state.maintenanceEndDate).format(),\n          maintenanceDescription: this.state.maintenanceDescription,\n          maintenanceStatus: parseInt(this.state.maintenanceStatus),\n          typeMaintenance: parseInt(this.state.typeMaintenance)\n        });\n        console.log(this.state).then(() => {\n          this.listarBarragens();\n        }).catch(erro => {\n          console.log(erro.response);\n        });\n      }\n\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleCancel = e => {\n      console.log(e);\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.editar = maintenanceId => {\n      axios.get(`http://localhost:8090/maintenaceById/${maintenanceId}`).then(reponse => {\n        this.setState({\n          maintenanceId: reponse.data.maintenanceId,\n          maintenanceStartDate: moment(reponse.data.maintenanceStartDate),\n          maintenanceEndDate: reponse.data.maintenanceEndDate,\n          maintenanceDescription: reponse.data.maintenanceDescription,\n          maintenanceStatus: statusManutencao(reponse.data.maintenanceStatus),\n          typeMaintenance: tipoManutencao(reponse.data.typeMaintenance)\n        });\n      }).catch(erro => {\n        alert(erro);\n      });\n      this.showModal(\"editar\");\n    };\n\n    this.deletar = maintenanceId => {\n      axios.get(`http://localhost:8090/maintenaceById/${maintenanceId}`).then(reponse => {\n        this.setState({\n          maintenanceId: reponse.data.maintenanceId,\n          maintenanceStartDate: moment(reponse.data.maintenanceStartDate),\n          maintenanceEndDate: reponse.data.maintenanceEndDate,\n          maintenanceDescription: reponse.data.maintenanceDescription,\n          maintenanceStatus: statusManutencao(reponse.data.maintenanceStatus),\n          typeMaintenance: tipoManutencao(reponse.data.typeMaintenance),\n          deletado: reponse.data.deletado\n        });\n        axios.put(`http://localhost:8090/updateMaintenance/${this.state.maintenanceId}`, {\n          maintenanceStartDate: this.state.maintenanceStartDate,\n          maintenanceEndDate: this.state.maintenanceEndDate,\n          maintenanceDescription: this.state.maintenanceDescription,\n          maintenanceStatus: this.state.maintenanceStatus,\n          typeMaintenance: this.state.typeMaintenance,\n          deletado: \"deletado\"\n        });\n      }).catch(erro => {\n        alert(erro);\n      });\n    };\n  }\n\n  onChange(date) {\n    console.log(date._d);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }\n    }, \"Lista de manuten\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      style: {\n        overflowX: \"auto\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(ManutencaoTable, {\n      data: this.props.data.filter(data => {\n        return data.deletado === null;\n      }),\n      editar: id => this.editar(id),\n      deletar: id => this.deletar(id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalGeneric, {\n      title: this.state.title,\n      visible: this.state.visible,\n      onOk: this.handleOk,\n      onCancel: this.handleCancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      label: \"Tipo de barragem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(SelectMenu, {\n      value: this.state.typeMaintenance,\n      className: \"form-control\",\n      lista: TIPO_MANUTENCAO,\n      onChange: e => this.setState({\n        typeMaintenance: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      htmlFor: \"maintenanceDescription\",\n      label: \"Descri\\xE7\\xE3o*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.maintenanceDescription,\n      type: \"text\",\n      className: \"form-control\",\n      id: \"inputNome\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Digite o nome do usu\\xE1rio\",\n      onChange: e => this.setState({\n        maintenanceDescription: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      htmlFor: \"maintenanceStartDate\",\n      label: \"Data inicial*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.maintenanceStartDate,\n      type: \"date\",\n      className: \"form-control\",\n      id: \"inputNome\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Digite o nome do usu\\xE1rio\",\n      onChange: e => this.setState({\n        maintenanceStartDate: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      htmlFor: \"maintenanceEndDate\",\n      label: \"Data final*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.maintenanceEndDate,\n      type: \"date\",\n      className: \"form-control\",\n      id: \"inputNome\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Digite o nome do usu\\xE1rio\",\n      onChange: e => this.setState({\n        maintenanceEndDate: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      label: \"Tipo de barragem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(SelectMenu, {\n      value: this.state.maintenanceStatus,\n      className: \"form-control\",\n      lista: STATUS_MANUTENCAO,\n      onChange: e => this.setState({\n        maintenanceStatus: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 21\n      }\n    }))))))));\n  }\n\n}\n\nexport default ListaManutencao;","map":{"version":3,"sources":["/home/administrador/Tcc-puc-minas/frontend/src/views/DetalhesAtivo/ListaManutencao/index.js"],"names":["React","useEffect","Card","ManutencaoTable","ModalGeneric","FormGroup","Button","InputNumber","DatePicker","axios","STATUS_MANUTENCAO","TIPO_MANUTENCAO","SelectMenu","PlusOutlined","moment","tipoManutencao","tipo","statusManutencao","ListaManutencao","Component","state","visible","title","params","maintenanceId","maintenanceStartDate","maintenanceEndDate","maintenanceDescription","maintenanceStatus","typeMaintenance","showModal","acao","setState","handleOk","_e","post","props","format","then","listarBarragens","catch","erro","console","log","response","put","parseInt","handleCancel","e","editar","get","reponse","data","alert","deletar","deletado","onChange","date","_d","render","fontWeight","overflowX","filter","id","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport Card from \"../../../components/Card\";\nimport ManutencaoTable from \"../ManutencaoTable\";\nimport ModalGeneric from \"../../../components/ModalGeneric\";\nimport FormGroup from \"../../../components/FormGroup\";\nimport { Button, InputNumber, DatePicker } from \"antd\";\nimport axios from \"axios\";\nimport {\n  STATUS_MANUTENCAO,\n  TIPO_MANUTENCAO,\n} from \"../../../utils/constants/selects\";\nimport SelectMenu from \"../../../components/SelectMenu\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport moment from \"moment\";\n\nconst tipoManutencao = (tipo) => {\n  switch (tipo) {\n    case \"PREVENTIVE\":\n      return 0;\n    case \"CORRECTIVE\":\n      return 1;\n    default:\n      break;\n  }\n};\n\nconst statusManutencao = (tipo) => {\n  switch (tipo) {\n    case \"OPEN\":\n      return 0;\n    case \"PROCESSING\":\n      return 1;\n    case \"CLOSED\":\n      return 2;\n    default:\n      break;\n  }\n};\n\nclass ListaManutencao extends React.Component {\n  state = {\n    visible: false,\n    title: \"\",\n    params: \"\",\n    maintenanceId: \"\",\n    maintenanceStartDate: \"\",\n    maintenanceEndDate: \"\",\n    maintenanceDescription: \"\",\n    maintenanceStatus: \"\",\n    typeMaintenance: \"\",\n  };\n\n  onChange(date) {\n    console.log(date._d);\n  }\n\n  showModal = (acao) => {\n    switch (acao) {\n      case \"cadastrar\":\n        this.setState({ title: \"Cadastrar manutenção\" });\n        this.setState({\n          maintenanceId: \"\",\n          maintenanceStartDate: \"\",\n          maintenanceEndDate: \"\",\n          maintenanceDescription: \"\",\n          maintenanceStatus: \"\",\n          typeMaintenance: \"\",\n        });\n        break;\n      case \"editar\":\n        this.setState({ title: \"Editar manutenção\" });\n        break;\n      default:\n        break;\n    }\n    this.setState({\n      visible: true,\n    });\n  };\n\n  handleOk = (_e) => {\n    if (this.state.title === \"Cadastrar manutenção\") {\n      axios\n        .post(`http://localhost:8090/saveMaintenance/${this.props.params}`, {\n          maintenanceStartDate: moment(\n            this.state.maintenanceStartDate\n          ).format(),\n          maintenanceEndDate: moment(this.state.maintenanceEndDate).format(),\n          maintenanceDescription: this.state.maintenanceDescription,\n          maintenanceStatus: this.state.maintenanceStatus,\n          typeMaintenance: this.state.typeMaintenance,\n        })\n        .then(() => {\n          this.listarBarragens();\n        })\n        .catch((erro) => {\n          console.log(erro.response);\n        });\n    } else {\n      axios.put(\n        `http://localhost:8090/updateMaintenance/${this.state.maintenanceId}`,\n        {\n          maintenanceStartDate: moment(\n            this.state.maintenanceStartDate\n          ).format(),\n          maintenanceEndDate: moment(this.state.maintenanceEndDate).format(),\n          maintenanceDescription: this.state.maintenanceDescription,\n          maintenanceStatus: parseInt(this.state.maintenanceStatus),\n          typeMaintenance: parseInt(this.state.typeMaintenance),\n        }\n      );\n      console\n        .log(this.state)\n        .then(() => {\n          this.listarBarragens();\n        })\n        .catch((erro) => {\n          console.log(erro.response);\n        });\n    }\n\n    this.setState({\n      visible: false,\n    });\n  };\n\n  handleCancel = (e) => {\n    console.log(e);\n    this.setState({\n      visible: false,\n    });\n  };\n\n  editar = (maintenanceId) => {\n    axios\n      .get(`http://localhost:8090/maintenaceById/${maintenanceId}`)\n      .then((reponse) => {\n        this.setState({\n          maintenanceId: reponse.data.maintenanceId,\n          maintenanceStartDate: moment(reponse.data.maintenanceStartDate),\n          maintenanceEndDate: reponse.data.maintenanceEndDate,\n          maintenanceDescription: reponse.data.maintenanceDescription,\n          maintenanceStatus: statusManutencao(reponse.data.maintenanceStatus),\n          typeMaintenance: tipoManutencao(reponse.data.typeMaintenance),\n        });\n      })\n      .catch((erro) => {\n        alert(erro);\n      });\n    this.showModal(\"editar\");\n  };\n\n  deletar = (maintenanceId) => {\n    axios\n      .get(`http://localhost:8090/maintenaceById/${maintenanceId}`)\n      .then((reponse) => {\n        this.setState({\n          maintenanceId: reponse.data.maintenanceId,\n          maintenanceStartDate: moment(reponse.data.maintenanceStartDate),\n          maintenanceEndDate: reponse.data.maintenanceEndDate,\n          maintenanceDescription: reponse.data.maintenanceDescription,\n          maintenanceStatus: statusManutencao(reponse.data.maintenanceStatus),\n          typeMaintenance: tipoManutencao(reponse.data.typeMaintenance),\n          deletado: reponse.data.deletado,\n        });\n        axios.put(\n          `http://localhost:8090/updateMaintenance/${this.state.maintenanceId}`,\n          {\n            maintenanceStartDate: this.state.maintenanceStartDate,\n            maintenanceEndDate: this.state.maintenanceEndDate,\n            maintenanceDescription: this.state.maintenanceDescription,\n            maintenanceStatus: this.state.maintenanceStatus,\n            typeMaintenance: this.state.typeMaintenance,\n            deletado: \"deletado\",\n          }\n        );\n      })\n      .catch((erro) => {\n        alert(erro);\n      });\n  };\n\n  render() {\n    return (\n      <>\n        {/* <div className=\"row\" style={{ marginBottom: \"15px\" }}>\n          <div className=\"col-md-12\">\n            <Button\n              type=\"primary\"\n              icon={<PlusOutlined />}\n              size=\"large\"\n              style={{ float: \"right\" }}\n              onClick={() => this.showModal(\"cadastrar\")}\n            >\n              Cadastrar manutenção\n            </Button>\n          </div>\n        </div> */}\n        <Card>\n          <h4 style={{ fontWeight: \"bold\" }}>Lista de manutenções</h4>\n          <br />\n          <div className=\"row\">\n            <div className=\"col-md-12\" style={{ overflowX: \"auto\" }}>\n              <div className=\"bs-component\">\n                <ManutencaoTable\n                  data={this.props.data.filter((data) => {\n                    return data.deletado === null;\n                  })}\n                  editar={(id) => this.editar(id)}\n                  deletar={(id) => this.deletar(id)}\n                />\n              </div>\n            </div>\n          </div>\n        </Card>\n        <div>\n          <ModalGeneric\n            title={this.state.title}\n            visible={this.state.visible}\n            onOk={this.handleOk}\n            onCancel={this.handleCancel}\n          >\n            <div className=\"row\">\n              <div className=\"col-md-6\">\n                <div className=\"bs-component\">\n                  <FormGroup label=\"Tipo de barragem\">\n                    <SelectMenu\n                      value={this.state.typeMaintenance}\n                      className=\"form-control\"\n                      lista={TIPO_MANUTENCAO}\n                      onChange={(e) =>\n                        this.setState({ typeMaintenance: e.target.value })\n                      }\n                    />\n                  </FormGroup>\n                  <FormGroup\n                    htmlFor=\"maintenanceDescription\"\n                    label=\"Descrição*\"\n                  >\n                    <input\n                      value={this.state.maintenanceDescription}\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"inputNome\"\n                      aria-describedby=\"emailHelp\"\n                      placeholder=\"Digite o nome do usuário\"\n                      onChange={(e) =>\n                        this.setState({\n                          maintenanceDescription: e.target.value,\n                        })\n                      }\n                    ></input>\n                  </FormGroup>\n                </div>\n              </div>\n              <div className=\"col-md-6\">\n                <div className=\"bs-component\">\n                  <FormGroup\n                    htmlFor=\"maintenanceStartDate\"\n                    label=\"Data inicial*\"\n                  >\n                    <input\n                      value={this.state.maintenanceStartDate}\n                      type=\"date\"\n                      className=\"form-control\"\n                      id=\"inputNome\"\n                      aria-describedby=\"emailHelp\"\n                      placeholder=\"Digite o nome do usuário\"\n                      onChange={(e) =>\n                        this.setState({ maintenanceStartDate: e.target.value })\n                      }\n                    ></input>\n                    {/* <DatePicker\n                      onChange={this.onChange}\n                      defaultValue={this.state.maintenanceStartDate}\n                      format=\"DD/MM/YYYY\"\n                    /> */}\n                  </FormGroup>\n\n                  <FormGroup htmlFor=\"maintenanceEndDate\" label=\"Data final*\">\n                    <input\n                      value={this.state.maintenanceEndDate}\n                      type=\"date\"\n                      className=\"form-control\"\n                      id=\"inputNome\"\n                      aria-describedby=\"emailHelp\"\n                      placeholder=\"Digite o nome do usuário\"\n                      onChange={(e) =>\n                        this.setState({ maintenanceEndDate: e.target.value })\n                      }\n                    ></input>\n                  </FormGroup>\n                </div>\n              </div>\n\n              <div className=\"col-md-6\">\n                <div className=\"bs-component\">\n                  <FormGroup label=\"Tipo de barragem\">\n                    <SelectMenu\n                      value={this.state.maintenanceStatus}\n                      className=\"form-control\"\n                      lista={STATUS_MANUTENCAO}\n                      onChange={(e) =>\n                        this.setState({ maintenanceStatus: e.target.value })\n                      }\n                    />\n                  </FormGroup>\n                </div>\n              </div>\n            </div>\n          </ModalGeneric>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default ListaManutencao;\n"]},"metadata":{},"sourceType":"module"}