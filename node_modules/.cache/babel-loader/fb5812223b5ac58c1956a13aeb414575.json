{"ast":null,"code":"var _jsxFileName = \"/home/administrador/Tcc-puc-minas/frontend/src/views/DetalhesBarragem/ListaAfetados/index.js\";\nimport React from \"react\";\nimport Card from \"../../../components/Card\";\nimport AfetadosTable from \"../AfetadosTable\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport ModalGeneric from \"../../../components/ModalGeneric\";\nimport { Button } from \"antd\";\nimport FormGroup from \"../../../components/FormGroup\";\nimport axios from \"axios\";\n\nclass ListaAfetados extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      visible: false,\n      affectedId: \"\",\n      name: \"\",\n      phone: \"\",\n      email: \"\"\n    };\n\n    this.showModal = acao => {\n      switch (acao) {\n        case \"cadastrar\":\n          this.setState({\n            title: \"Cadastrar afetado\"\n          });\n          this.setState({\n            name: \"\",\n            phone: \"\",\n            email: \"\"\n          });\n          break;\n\n        case \"editar\":\n          this.setState({\n            title: \"Editar afetado\"\n          });\n          break;\n\n        default:\n          break;\n      }\n\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.handleOk = _e => {\n      if (this.state.title === \"Cadastrar afetado\") {\n        axios.post(`http://localhost:8090/saveAffected/${this.props.damId}`, {\n          name: this.state.name,\n          phone: this.state.phone,\n          email: this.state.email\n        }).then(() => {\n          this.props.listDams();\n        }).catch(erro => {\n          console.log(erro.response);\n        });\n      } else {\n        axios.put(`http://localhost:8090/updateAffected/${this.state.affectedId}`, {\n          name: this.state.name,\n          phone: this.state.phone,\n          email: this.state.email,\n          deletado: this.state.deletado\n        }).then(() => {\n          this.props.listDams();\n        }).catch(erro => {\n          console.log(erro.response);\n        });\n      }\n\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleCancel = _e => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.deletar = affectedId => {\n      axios.get(`http://localhost:8090/affectedById/${affectedId}`).then(reponse => {\n        this.setState({\n          name: reponse.data.name,\n          phone: reponse.data.phone,\n          email: reponse.data.email,\n          deletado: reponse.data.deletado\n        });\n        axios.put(`http://localhost:8090/updateAffected/${affectedId}`, {\n          name: this.state.name,\n          phone: this.state.phone,\n          email: this.state.email,\n          deletado: \"deletado\"\n        }).then(() => {\n          this.props.listDams();\n        });\n      }).catch(erro => {\n        alert(erro);\n      });\n    };\n\n    this.editar = affectedId => {\n      axios.get(`http://localhost:8090/affectedById/${affectedId}`).then(reponse => {\n        this.setState({\n          affectedId: reponse.data.affectedId,\n          name: reponse.data.name,\n          phone: reponse.data.phone,\n          email: reponse.data.email,\n          deletado: reponse.data.deletado\n        });\n      }).catch(erro => {\n        alert(erro);\n      });\n      this.showModal(\"editar\");\n    };\n  }\n\n  componentDidMount() {}\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      style: {\n        marginBottom: \"15px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      icon: /*#__PURE__*/React.createElement(PlusOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }\n      }),\n      size: \"large\",\n      style: {\n        float: \"right\"\n      },\n      onClick: () => this.showModal(\"cadastrar\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }, \"Cadastrar afetado\"))), /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }\n    }, \"Lista de afetados\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      style: {\n        overflowX: \"auto\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(AfetadosTable, {\n      data: this.props.data.filter(data => {\n        return data.deletado === null;\n      }),\n      editar: affectedId => this.editar(affectedId),\n      deletar: affectedId => this.deletar(affectedId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalGeneric, {\n      title: this.state.title,\n      visible: this.state.visible,\n      onOk: this.handleOk,\n      onCancel: this.handleCancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      htmlFor: \"name\",\n      label: \"Nome do afetado*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.name,\n      type: \"text\",\n      className: \"form-control\",\n      id: \"inputNome\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Digite o nome do afetado\",\n      onChange: e => this.setState({\n        name: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      htmlFor: \"phone\",\n      label: \"Telefone*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.phone,\n      type: \"text\",\n      className: \"form-control\",\n      id: \"inputNome\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Digite o telefone do afetado\",\n      onChange: e => this.setState({\n        phone: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bs-component\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      htmlFor: \"email\",\n      label: \"E-mail*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.email,\n      type: \"text\",\n      className: \"form-control\",\n      id: \"inputNome\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Digite o nome do usu\\xE1rio\",\n      onChange: e => this.setState({\n        email: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }\n    }))))))));\n  }\n\n}\n\nexport default ListaAfetados;","map":{"version":3,"sources":["/home/administrador/Tcc-puc-minas/frontend/src/views/DetalhesBarragem/ListaAfetados/index.js"],"names":["React","Card","AfetadosTable","PlusOutlined","ModalGeneric","Button","FormGroup","axios","ListaAfetados","Component","state","data","visible","affectedId","name","phone","email","showModal","acao","setState","title","handleOk","_e","post","props","damId","then","listDams","catch","erro","console","log","response","put","deletado","handleCancel","deletar","get","reponse","alert","editar","componentDidMount","render","marginBottom","float","fontWeight","overflowX","filter","e","target","value"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Card from \"../../../components/Card\";\nimport AfetadosTable from \"../AfetadosTable\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport ModalGeneric from \"../../../components/ModalGeneric\";\nimport { Button } from \"antd\";\nimport FormGroup from \"../../../components/FormGroup\";\nimport axios from \"axios\";\n\nclass ListaAfetados extends React.Component {\n  state = {\n    data: [],\n    visible: false,\n    affectedId: \"\",\n    name: \"\",\n    phone: \"\",\n    email: \"\",\n  };\n\n  componentDidMount() {}\n\n  showModal = (acao) => {\n    switch (acao) {\n      case \"cadastrar\":\n        this.setState({ title: \"Cadastrar afetado\" });\n        this.setState({\n          name: \"\",\n          phone: \"\",\n          email: \"\",\n        });\n        break;\n      case \"editar\":\n        this.setState({ title: \"Editar afetado\" });\n        break;\n      default:\n        break;\n    }\n    this.setState({\n      visible: true,\n    });\n  };\n\n  handleOk = (_e) => {\n    if (this.state.title === \"Cadastrar afetado\") {\n      axios\n        .post(`http://localhost:8090/saveAffected/${this.props.damId}`, {\n          name: this.state.name,\n          phone: this.state.phone,\n          email: this.state.email,\n        })\n        .then(() => {\n          this.props.listDams();\n        })\n        .catch((erro) => {\n          console.log(erro.response);\n        });\n    } else {\n      axios\n        .put(`http://localhost:8090/updateAffected/${this.state.affectedId}`, {\n          name: this.state.name,\n          phone: this.state.phone,\n          email: this.state.email,\n          deletado: this.state.deletado,\n        })\n        .then(() => {\n          this.props.listDams();\n        })\n        .catch((erro) => {\n          console.log(erro.response);\n        });\n    }\n\n    this.setState({\n      visible: false,\n    });\n  };\n\n  handleCancel = (_e) => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  deletar = (affectedId) => {\n    axios\n      .get(`http://localhost:8090/affectedById/${affectedId}`)\n      .then((reponse) => {\n        this.setState({\n          name: reponse.data.name,\n          phone: reponse.data.phone,\n          email: reponse.data.email,\n          deletado: reponse.data.deletado,\n        });\n        axios\n          .put(`http://localhost:8090/updateAffected/${affectedId}`, {\n            name: this.state.name,\n            phone: this.state.phone,\n            email: this.state.email,\n            deletado: \"deletado\",\n          })\n          .then(() => {\n            this.props.listDams();\n          });\n      })\n      .catch((erro) => {\n        alert(erro);\n      });\n  };\n\n  editar = (affectedId) => {\n    axios\n      .get(`http://localhost:8090/affectedById/${affectedId}`)\n      .then((reponse) => {\n        this.setState({\n          affectedId: reponse.data.affectedId,\n          name: reponse.data.name,\n          phone: reponse.data.phone,\n          email: reponse.data.email,\n          deletado: reponse.data.deletado,\n        });\n      })\n      .catch((erro) => {\n        alert(erro);\n      });\n    this.showModal(\"editar\");\n  };\n\n  render() {\n    return (\n      <>\n        <div className=\"row\" style={{ marginBottom: \"15px\" }}>\n          <div className=\"col-md-12\">\n            <Button\n              type=\"primary\"\n              icon={<PlusOutlined />}\n              size=\"large\"\n              style={{ float: \"right\" }}\n              onClick={() => this.showModal(\"cadastrar\")}\n            >\n              Cadastrar afetado\n            </Button>\n          </div>\n        </div>\n        <Card>\n          <h4 style={{ fontWeight: \"bold\" }}>Lista de afetados</h4>\n          <br />\n          <div className=\"row\">\n            <div className=\"col-md-12\" style={{ overflowX: \"auto\" }}>\n              <div className=\"bs-component\">\n                <AfetadosTable\n                  data={this.props.data.filter((data) => {\n                    return data.deletado === null;\n                  })}\n                  editar={(affectedId) => this.editar(affectedId)}\n                  deletar={(affectedId) => this.deletar(affectedId)}\n                />\n              </div>\n            </div>\n          </div>\n        </Card>\n        <div>\n          <ModalGeneric\n            title={this.state.title}\n            visible={this.state.visible}\n            onOk={this.handleOk}\n            onCancel={this.handleCancel}\n          >\n            <div className=\"row\">\n              <div className=\"col-md-6\">\n                <div className=\"bs-component\">\n                  <FormGroup htmlFor=\"name\" label=\"Nome do afetado*\">\n                    <input\n                      value={this.state.name}\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"inputNome\"\n                      aria-describedby=\"emailHelp\"\n                      placeholder=\"Digite o nome do afetado\"\n                      onChange={(e) => this.setState({ name: e.target.value })}\n                    ></input>\n                  </FormGroup>\n                  <FormGroup htmlFor=\"phone\" label=\"Telefone*\">\n                    <input\n                      value={this.state.phone}\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"inputNome\"\n                      aria-describedby=\"emailHelp\"\n                      placeholder=\"Digite o telefone do afetado\"\n                      onChange={(e) => this.setState({ phone: e.target.value })}\n                    ></input>\n                  </FormGroup>\n                </div>\n              </div>\n              <div className=\"col-md-6\">\n                <div className=\"bs-component\">\n                  <FormGroup htmlFor=\"email\" label=\"E-mail*\">\n                    <input\n                      value={this.state.email}\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"inputNome\"\n                      aria-describedby=\"emailHelp\"\n                      placeholder=\"Digite o nome do usuário\"\n                      onChange={(e) => this.setState({ email: e.target.value })}\n                    ></input>\n                  </FormGroup>\n                </div>\n              </div>\n            </div>\n          </ModalGeneric>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default ListaAfetados;\n"]},"metadata":{},"sourceType":"module"}